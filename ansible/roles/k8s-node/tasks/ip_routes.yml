---
# disable routes for the vagrant-required nat nic
- name: 99-disable-network-config.cfg
  ansible.builtin.copy:
    src: ../files/99-disable-network-config.cfg
    dest: /etc/cloud/cloud.cfg.d/99-disable-network-config.cfg
  notify:
  - netplan generate

# https://github.com/kelseyhightower/kubernetes-the-hard-way/blob/8fd6380bbc92137f8d1cb62f00865f1b3c681d3c/docs/11-pod-network-routes.md#the-routing-table
- name: Create netplan 50-vagrant.yaml
  ansible.builtin.template:
      src: 50-vagrant.yaml.j2
      dest: /etc/netplan/50-vagrant.yaml
  notify:
  - netplan generate

# - name: Disbale cloud-init network config
#   ansible.builtin.file:
# /etc/cloud/cloud.cfg.d/99-disable-network-config.cfg with the following:
# network: {config: disabled}